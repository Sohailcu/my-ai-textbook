# Railway deployment configuration
# This file specifies how to deploy the backend service on Railway

# Service name
name: "textbook-generation-backend"

# Build configuration
build:
  builder: heroku-22  # or the appropriate buildpack
  buildCommand: pip install -r requirements.txt
  installCommand: pip install -r requirements.txt

# Environment variables to set
variables:
  - DATABASE_URL
  - QDRANT_HOST
  - QDRANT_PORT
  - QDRANT_API_KEY
  - SECRET_KEY
  - OPENAI_API_KEY

# Health check endpoint
healthcheck:
  url: 'http://localhost:8000/health'
  port: 8000
  timeout: 30
  attempts: 3
  interval: 60

# Ports to expose
ports:
  - port: 8000
    protocol: http
    name: http

# Start command
startCommand: uvicorn src.main:app --host 0.0.0.0 --port $PORT